memgraph:
  image:
    repository: memgraph/memgraph
    tag: 2.22.0
    pullPolicy: IfNotPresent
  env:
    MEMGRAPH_ENTERPRISE_LICENSE: "<your-license>"
    MEMGRAPH_ORGANIZATION_NAME: "<your-organization-name>"
  probes:
    startup:
      failureThreshold: 30
      periodSeconds: 10
    readiness:
      initialDelaySeconds: 5
      periodSeconds: 5
    liveness:
      initialDelaySeconds: 30
      periodSeconds: 10
  data:
    volumeClaim:
      storagePVCClassName: ""
      storagePVC: true
      storagePVCSize: "1Gi"
      logPVCClassName: ""
      logPVC: true
      logPVCSize: "256Mi"
  coordinators:
    volumeClaim:
      storagePVCClassName: ""
      storagePVC: true
      storagePVCSize: "1Gi"
      logPVCClassName: ""
      logPVC: true
      logPVCSize: "256Mi"
  affinity:
    enabled: true
  ports:
    boltPort: 7687
    managementPort: 10000
    replicationPort: 20000
    coordinatorPort: 12000
  coordLoadBalancer:
    enabled: true

# If you are experiencing issues with the sysctlInitContainer, you can disable it here.
# This is made to increase the max_map_count, necessary for high memory loads in Memgraph
# If you are experiencing crashing pod with the: Max virtual memory areas vm.max_map_count is too low
# you can increase the maxMapCount value.
sysctlInitContainer:
  enabled: true
  maxMapCount: 262144

data:
- id: "0"
  args:
  - "--management-port=10000"
  - "--bolt-port=7687"
  - "--also-log-to-stderr"
  - "--log-level=TRACE"
  - "--log-file=/var/log/memgraph/memgraph.log"

- id: "1"
  args:
  - "--management-port=10000"
  - "--bolt-port=7687"
  - "--also-log-to-stderr"
  - "--log-level=TRACE"
  - "--log-file=/var/log/memgraph/memgraph.log"

coordinators:
- id: "1"
  args:
  - "--coordinator-id=1"
  - "--coordinator-port=12000"
  - "--management-port=10000"
  - "--bolt-port=7687"
  - "--also-log-to-stderr"
  - "--log-level=TRACE"
  - "--coordinator-hostname=memgraph-coordinator-1.default.svc.cluster.local"
  - "--log-file=/var/log/memgraph/memgraph.log"
  - "--nuraft-log-file=/var/log/memgraph/memgraph.log"

- id: "2"
  args:
  - "--coordinator-id=2"
  - "--coordinator-port=12000"
  - "--management-port=10000"
  - "--bolt-port=7687"
  - "--also-log-to-stderr"
  - "--log-level=TRACE"
  - "--coordinator-hostname=memgraph-coordinator-2.default.svc.cluster.local"
  - "--log-file=/var/log/memgraph/memgraph.log"
  - "--nuraft-log-file=/var/log/memgraph/memgraph.log"

- id: "3"
  args:
  - "--coordinator-id=3"
  - "--coordinator-port=12000"
  - "--management-port=10000"
  - "--bolt-port=7687"
  - "--also-log-to-stderr"
  - "--log-level=TRACE"
  - "--coordinator-hostname=memgraph-coordinator-3.default.svc.cluster.local"
  - "--log-file=/var/log/memgraph/memgraph.log"
  - "--nuraft-log-file=/var/log/memgraph/memgraph.log"
